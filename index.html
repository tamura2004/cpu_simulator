<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <title>CPU演習</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
    <link rel="stylesheet" href="main.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.24/vue.js"></script>
  </head>
  <body>
    <nav class="navbar navbar-inverse">
      <div class="container-fluid">
        <div class="navbar-brand">Debris</div>
      </div>
    </nav>
    <div class="container-fluid" id="app">
      <form class="form-horizontal">

        <div class="row">
          <div class="col-xs-9">
            <div class="row">

              <div class="col-xs-2">
                <div class="form-group">
                  <label class="control-label">A</label>
                  <input class="numeric form-control" type="number" step="1" id="cpu_a" v-model="a" number="" />
                </div>

                <div class="form-group">
                  <label class="control-label">B</label>
                  <input class="numeric form-control" type="number" step="1" id="cpu_b" v-model="b" number="" />
                </div>

                <div class="form-group">
                  <label class="control-label">C</label>
                  <input class="numeric form-control" type="number" step="1" id="cpu_c" v-model="c" number="" />
                </div>

                <hr>

                <h5>FLAG</h5>

                <div class="checkbox">
                  <label>
                    <input type="checkbox" name="zero" v-model="zero"/>ZERO
                  </label>
                </div>

                <div class="checkbox">
                  <label>
                    <input type="checkbox" name="carry" v-model="carry"/>CARRY
                  </label>
                </div>

              </div>

              <div class="col-xs-2">
                <div class="form-group">
                  <label class="control-label">PC</label>
                  <input class="numeric form-control" type="number" step="1" id="cpu_pc" v-model="pc" number="" />
                </div>

                <div class="form-group">
                  <label class="control-label">SP</label>
                  <input class="numeric form-control" type="number" step="1" id="cpu_sp" v-model="sp" number="" />
                </div>

                <div class="form-group">
                  <label class="control-label">CODE</label>
                  <input class="numeric form-control" type="number" step="1" id="cpu_code" v-model="opecode" number="" />
                </div>

                <div class="form-group">
                  <label class="control-label">DATA</label>
                  <input class="numeric form-control" type="number" step="1" id="cpu_data" v-model="operand" number="" />
                </div>

              </div>

              <div class="col-xs-1" v-for="col in 8">
                <div class="form-group" v-for="m in ms | limitBy 5 (col*5)">
                  <label class="control-label">{{m.id}}</label>
                  <input class="numeric form-control" type="number" step="1" v-bind:class="{'pc':m.id == pc, 'sp':m.id == sp, 'b':m.id == b}" v-model="m.val" number="" />
                </div>
              </div>
            </div>
          </div>

          <div class="col-xs-3">
            <div class="row">

              <div class="col-xs-6">
                <div class="form-group text optional code">
                  <label class="text optional control-label" for="code">コード</label>
                  <textarea v-model="code" class="text optional form-control" name="code" id="code"></textarea>
                </div>
              </div>

              <div class="col-xs-6">
                <div class="form-group text optional cpu_message">
                  <label class="text optional control-label" for="cpu_message">メッセージ</label>
                  <textarea class="text optional form-control" name="cpu[message]" id="cpu_message">{{message.join("\n")}}</textarea>
                </div>
              </div>

            </div>
          </div>
        </div>
        <hr />

        <div class="row">
          <div class="col-xs-9">
            <input type="submit" name="commit" value="ステップ実行" class="btn btn-default btn-primary" v-on:click.stop.prevent="execute" />
            <input type="submit" name="commit" value="実行" class="btn btn-default btn-default"  v-on:click.stop.prevent="execute_all" />
            <input type="submit" name="commit" value="停止" class="btn btn-default btn-default"  v-on:click.stop.prevent="halt = true" />
            <input type="submit" name="commit" value="レジスタリセット" class="btn btn-default btn-default"  v-on:click.stop.prevent="reset_register" />
            <input type="submit" name="commit" value="メモリリセット" class="btn btn-default btn-default"  v-on:click.stop.prevent="reset_memory" />
            <input type="submit" name="commit" value="乱数" class="btn btn-default btn-default"  v-on:click.stop.prevent="set_random" />
            <input type="submit" name="commit" value="連番" class="btn btn-default btn-default"  v-on:click.stop.prevent="set_seqdata" />
          </div>
          <div class="col-xs-3">
            <input type="submit" name="commit" value="コンパイル" class="btn btn-default btn-primary"  v-on:click.stop.prevent="import" />
            <input type="submit" name="commit" value="ダンプ" class="btn btn-default" v-on:click.stop.prevent="export" />
          </div>
        </div>
        <hr>
        
        <div class="row">
          <div class="col-xs-12">
            <h2>命令表</h2>
            <table class="table table-condensed table-striped">
              <thead>
                <tr>
                  <th>\</th>
                  <th v-for="col in 10">
                    {{col*10}}
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr v-for="row in 10">
                  <td>
                    <strong>
                      {{ row }}
                    </strong>
                  </td>
                  <td v-for="col in 10">
                    {{ table[row+col*10] }}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-6">
            <h2>オペコード一覧</h2>
            <table class="table table-condensed table-striped">
              <thead>
                <tr>
                  <th>オペコード</th>
                  <th>例(Java)</th>
                  <th>説明</th>
                </tr>
              </thead>
              <tbody>
                <tr v-for="opecode in opecodes">
                  <td>{{opecode.cmd}}</td>
                  <td>{{opecode.sample}}</td>
                  <td>{{opecode.desc}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <hr>

<!--       <pre>
        {{ zero | json 2}}
      </pre> -->

    </div>
  </body>
  <script type="text/javascript" src="main.js"></script>
</html>